#!/usr/bin/env python3
import sys
import os
import subprocess

import prototype

def testError(line, msg):
    script_vars = prototype.createScriptVars(__file__)
    result = prototype.runLine(line, script_vars, print_trace=False, capture_stdout=True)
    assert(type(result.stdout) == str)
    if result.exitcode == 0:
        print("Error: expected an error but got success: '{}'".format(line))

def main():
    #testError("$and", "???")

    script_dir = os.path.dirname(__file__)
    result = subprocess.run([os.path.join(script_dir, "prototype"), "script-tests"])
    if result.returncode != 0:
        sys.exit(result.returncode)

    print("test: success")

main()
