#!/usr/bin/env stitch

true
@assert @true
@assert @not @false
@assert @not (@not @true)
@assert @false @or @true
@assert (true) @and @true
@assert (false) @or (false) @or (true)
@assert (true) @and (true) @and (true)

@assert foo @eq foo
@assert @not (foo @eq bar)

@assert 0 @eq 0
@assert 2 @gt 1
@assert @not (1 @gt 2)
@assert 2 @lt 3
@assert @not (3 @lt 2)

@set if_block_executed 0
@if @true
    @set if_block_executed 1
@end
@assert $if_block_executed @eq 1

@set if_block_executed 0
@if @not @true
    # TODO: maybe there should be a @panic for this? That optionally takes a message?
    @assert @false
@end
@assert $if_block_executed @eq 0

@if @haveprog which
    @set direct_which (which ls)

    @set which which
    @set indirect_which ($which ls)

    test $direct_which = $indirect_which
@end
