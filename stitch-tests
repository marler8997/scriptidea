#!/usr/bin/env stitch
#
# TODO: use an array to enumerate all the examples
#
@if @not @haveprog true
    @setenv PATH @scriptdir/assetsfortest/missing_windows_programs;(@env PATH)
@end

@if @haveprog dirname:
    @echo testing scriptdir @scriptdir
    @assert @scriptdir @eq (dirname @scriptfile)
@end

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@call @scriptdir/examples/first

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@call @scriptdir/examples/gitchanges

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@call @scriptdir/examples/ldd

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@if @haveprog date
    @call @scriptdir/examples/datetime
@end

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@if @haveprog rm
    @call @scriptdir/examples/bash-pitfalls
@end

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@call @scriptdir/examples/misc

@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@note --------------------------------------------------------------------------------
@if (@haveprog du) @and (@haveprog tr) @and (@haveprog cut)
    @call @scriptdir/examples/rotate
    rm -rf @scriptdir/examples/scratch
@end

@note stitch-tests: success
